# 什麼是微服務架構？它與單體架構有何優缺點？

- **難度**: 6
- **重要程度**: 5
- **標籤**: `Microservice`, `Architecture`, `System Design`

## 問題詳述

微服務架構是現代後端開發的主流架構之一。請解釋什麼是微服務架構，並詳細比較它與傳統的單體架構（Monolithic Architecture）各自的優點和缺點。

## 核心理論與詳解

### 單體架構 (Monolithic Architecture)

單體架構是一種將應用程式的所有功能模組、元件（例如使用者介面、業務邏輯、資料存取層）都打包在一個單一的、獨立的部署單元（例如一個 WAR 檔、一個執行檔）中的軟體開發模式。

- **結構**: 應用程式是一個統一的整體，所有功能緊密耦合在一起。
- **開發**: 所有開發人員都在同一個程式碼庫上工作。
- **部署**: 整個應用程式作為一個單元進行部署。任何微小的修改都需要重新部署整個系統。
- **擴展**: 只能對整個應用程式進行水平擴展（即複製多個完整的應用實例），無法針對性地擴展某個高負載的模組。

![單體架構圖](https://i.imgur.com/E3v4S3s.png)

### 微服務架構 (Microservice Architecture)

微服務架構是一種將單一應用程式開發為一組小型、獨立、鬆散耦合的服務的架構風格。每個服務都圍繞著特定的業務功能來構建，並且可以獨立開發、部署和擴展。

- **結構**: 應用程式被拆分成多個獨立的服務，每個服務都有自己的程式碼庫、資料庫和執行環境。
- **通訊**: 服務之間通過定義良好的 API（通常是輕量級的 HTTP/REST 或 gRPC）進行通訊。
- **開發**: 不同的團隊可以獨立地開發和維護自己的服務。
- **部署**: 每個服務都可以獨立部署，修改一個服務不需要重新部署整個系統。
- **擴展**: 可以根據每個服務的實際負載情況，對其進行獨立的水平擴展。

![微服務架構圖](https://i.imgur.com/s3bQ2pC.png)

### 優缺點比較

| 特性 | 單體架構 (Monolithic) | 微服務架構 (Microservice) |
| :--- | :--- | :--- |
| **優點** | 開發簡單，部署直接，測試方便，且無需處理分散式系統的複雜性。 | 可對服務獨立擴展，允許技術異構，團隊自治且敏捷，並能做到故障隔離，易於維護和獨立部署。 |
| **缺點** | 技術棧單一，可靠性較差，擴展性受限，且隨著系統變複雜，開發效率會下降並阻礙創新。 | 系統分散式帶來高複雜性，運維成本高，服務間通訊有額外成本，分散式事務處理困難，測試與部署流程更複雜。 |

## 總結與權衡

- **單體架構** 非常適合**專案初期、業務邏輯簡單、團隊規模小**的場景。它可以讓團隊快速啟動和迭代。
- **微服務架構** 則更適合**大型、複雜、需要長期演進的系統**，特別是當應用程式面臨**高併發、團隊擴張、需要快速獨立交付**等挑戰時。

從單體架構遷移到微服務架構是一個常見的演進路徑，但這個過程需要謹慎規劃。在決定採用微服務之前，團隊必須評估自己是否具備應對其帶來的高運維成本和分散式系統複雜性的能力。
