# 如何設計 LinkedIn 社交平台？

- **難度**: 9
- **重要程度**: 5
- **標籤**: `System Design`, `Professional Graph`, `Search`, `Jobs`, `Recommendation`

## 問題詳述

設計 LinkedIn 類平台，強調職業社交圖、履歷/職缺與高品質內容。功能包含連結（Connections）、動態（Feed）、訊息、公司/學校頁、技能/背書、求職/招募、搜尋與推薦。需保障隱私與專業內容品質。

## 核心理論與詳解

### 1. 需求澄清與界定

- 功能：個人檔案（教育、經歷、技能）、一度/二度/三度連結、Feed、長文/短帖、訊息、職缺、推薦/背書、公司頁/校友網。
- 約束：專業社交圖（低噪音、高可信）、隱私控制（誰可見/誰可聯繫）、合規（GDPR/EEA 招募法規）。

### 2. 資料模型與職業圖譜

- Member：教育、經歷、技能、所在地、意向、隱私設定。
- Company/School：頁面、成員、徵才、品牌。
- Connection：連結請求/同意/解除；權重（互動強度、共同關係）。
- Job/Post：職缺描述、要求、地點、薪資範圍；內容帖子與長文。
- Graph 存儲：關係圖（Cassandra/Graph DB/自建索引）+ MySQL 交易資料。

### 3. 搜尋與檢索

- Member/Job/Company 多索引：ES/向量索引（簡歷與職缺語義向量）。
- 適配：
  - 求職搜尋：技能/關鍵字/地點/資歷/薪資過濾；
  - 招募搜尋：布林/語義混合、連結度作為排名信號；
  - 人脈搜尋：度數、共同公司/學校/技能。
- 權限：索引時寫入可見性（viewer-based filtering），查詢時快速過濾。

### 4. Feed 與內容排序

- 來源：一度連結內容、二度推薦、公司頁、群組；
- 排序信號：專業相關性、連結強度、互動質量（評論深度>按讚）、主題多樣性、長文閱讀完成度；
- 安全：商業/招募導向內容權重、廣告/贊助內容分層控比。
- 生成：混合 fanout，二度/主題探索由讀時拉取與排序補齊。

### 5. 求職/配對

- 雙向匹配：候選人→職缺（技能/經驗/地點/薪資/可遷移性）；企業→候選（召回+排序）。
- 召回：布林檢索 + 語義 ANN（技能、職稱標準化，如“Software Engineer” vs “Backend Developer”）。
- 排序：資格符合度、轉換率預測、冷熱啟發、僱主偏好、合規（公平性）。
- 追蹤：應徵漏斗（檢視→投遞→面試→錄用）。

### 6. 隱私與合規

- 可見性：檔案欄位級權限、連結度門檻（僅一度/二度可見等）。
- 通訊：訊息與 InMail 反濫用（速率限制、信譽分、回覆意願預測）。
- 合規：GDPR 刪除、資料最小化、審計追蹤；招募區域合規（EEA、EEOC）。

### 7. 反濫用與品質

- 假職缺/廣告：商業審核、企業驗證、行為信號；
- 低品質內容：模型偵測（釣魚、灌水）、降權處理；
- 連結垃圾：連結邀請限流、原因模板、回覆率監控。

### 8. 可用性與一致性

- 多區域：資料分域（隱私/資料主權）、近源讀取；
- 一致性：重要操作強一致（投遞、邀請），Feed 最終一致；
- 災備：跨域副本與讀隔離，重建索引靠事件回放。

### 9. 指標與可觀測性

- 指標：職缺投遞轉換、招募搜尋成功率、Feed 互動質量（評論率/長文閱讀）、InMail 回覆率、連結邀請接受率。
- 追蹤：從檢索/排序到點擊/投遞的全鏈路；
- 審計：敏感操作留存與遮罩。

## 程式碼範例 (可選)

```go
// 三度連結 BFS（簡化示意）
func DegreesWithin3(src int64, target int64) bool {
    // 省略：從圖索引以 BFS 最多 3 層檢查可達性
    return reachableWithinK(src, target, 3)
}
```

## 總結

LinkedIn 核心是「專業圖譜 + 搜尋/配對」：以高品質與隱私為前提，構建可擴展的關係/內容/職缺檢索與排序系統，並以合規與反濫用機制維持生態可信度。
