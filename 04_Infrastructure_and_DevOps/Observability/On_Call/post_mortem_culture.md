# Post-mortem Culture (事後復盤文化)

- **難度**: 5
- **標籤**: `On-Call`, `Culture`, `Post-mortem`, `Blameless`

## 問題詳述

「不指責 (Blameless)」是 Google SRE 文化的核心。請解釋什麼是 Blameless Post-mortem，以及為什麼它對團隊的長期穩定性至關重要？一份好的事故報告應該包含哪些內容？

## 核心理論與詳解

Post-mortem (事後復盤/驗屍報告) 不是為了找人背鍋，而是為了**系統性地消除未來發生同樣錯誤的可能性**。

### 1. Blameless (不指責) 的真諦

- **定義**: 在復盤過程中，專注於**流程、技術和機制**的失敗，而不是**人**的失敗。
- **為什麼重要？**:
  - 如果工程師擔心被懲罰，他們就會隱瞞真相，或者在事故發生時不敢採取行動。
  - **人總是會犯錯的**。如果一個系統允許一個人通過敲錯一個命令就刪除所有數據，那麼錯誤在於系統設計，而不是那個人。
- **範例**:
  - ❌ "小明不小心刪除了生產資料庫。" (指責個人)
  - ✅ "資料庫刪除權限沒有受到多重驗證機制的保護，且操作介面缺乏足夠的警示。" (檢討系統)

### 2. 好的 Post-mortem 報告結構

一份標準的事故報告應包含以下部分：

1. **Summary (摘要)**: 簡短描述發生了什麼，影響範圍 (Impact)，持續時間。
2. **Timeline (時間線)**: 詳細到分鐘的操作記錄。
    - `10:00` 收到告警。
    - `10:05` IC 加入 War Room。
    - `10:15` 執行回滾操作。
3. **Root Cause Analysis (RCA - 根因分析)**:
    - 使用 **5 Whys (五個為什麼)** 方法挖掘深層原因。
    - *Why 1*: 為什麼服務掛了？ -> 因為資料庫連不上了。
    - *Why 2*: 為什麼資料庫連不上了？ -> 因為連線池滿了。
    - *Why 3*: 為什麼連線池滿了？ -> 因為有一個慢查詢佔用了所有連線。
    - *Why 4*: 為什麼會有慢查詢？ -> 因為新發布的代碼沒有加索引。
    - *Why 5*: 為什麼沒加索引的代碼能上線？ -> 因為 CI/CD 流程中缺乏自動化的 SQL 審計工具。
4. **Action Items (改進措施)**:
    - 這是最有價值的部分。必須是**具體的、可執行的、有負責人和截止日期的**。
    - ✅ "在 CI 流程中集成 SQLLint 工具，阻擋無索引查詢。" (Jira-123, @DevOps, 2023-11-01)
    - ❌ "以後大家寫 SQL 要小心一點。" (無效建議)

### 3. 復盤的時機

- **何時做？**: 事故結束後 24-48 小時內。記憶還新鮮，但情緒已經平復。
- **誰參加？**: 所有參與事故處理的人，以及相關的利益相關者 (Stakeholders)。

## 程式碼範例

(無程式碼，僅為文化說明)
