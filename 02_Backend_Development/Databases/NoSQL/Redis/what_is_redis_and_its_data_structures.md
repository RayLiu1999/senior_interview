# 什麼是 Redis？它支援哪些主要的資料結構？

- **難度**: 2
- **重要程度**: 4
- **標籤**: `Redis`, `NoSQL`, `Data Structures`

## 問題詳述

請解釋 Redis 是什麼，它的主要特點，以及它原生支援的幾種核心資料結構。

## 核心理論與詳解

Redis (Remote Dictionary Server) 是一個開源、高效能、基於記憶體的鍵值 (Key-Value) 儲存系統。它通常被歸類為 NoSQL 資料庫，但也常被用作快取、訊息代理 (Message Broker) 和資料結構伺服器。

### Redis 的核心特點

1. **基於記憶體 (In-Memory)**：Redis 將絕大部分資料儲存在記憶體中，這使得它的讀寫速度極快，延遲非常低 (通常在亞毫秒級)。這是它作為高效能快取首選的主要原因。
2. **資料持久化**：與純粹的記憶體快取 (如 Memcached) 不同，Redis 支援將記憶體中的資料非同步寫入硬碟，實現資料持久化。主要有 RDB (快照) 和 AOF (日誌追加) 兩種方式。
3. **豐富的資料結構**：Redis 不僅僅是簡單的字串鍵值對，它原生支援多種複雜的資料結構，如列表、集合、雜湊等。這使得開發者可以在伺服器端直接操作資料，減少了客戶端與伺服器之間的資料傳輸和計算開銷。
4. **單執行緒模型**：Redis 的核心網路模型採用單執行緒處理客戶端請求，避免了多執行緒情境下不必要的上下文切換和鎖競爭。它利用 I/O 多路複用 (Multiplexing) 技術來處理並發連接，確保了高效能。
5. **高可用性與擴展性**：透過 Redis Sentinel (哨兵) 機制可以實現主從架構下的自動故障轉移 (Failover)，而 Redis Cluster 則提供了去中心化的分散式儲存方案，支援資料分片 (Sharding) 和水平擴展。
6. **多功能性**：除了資料庫和快取，Redis 還提供了發布/訂閱 (Pub/Sub)、交易 (Transaction)、Lua 腳本等功能，使其能夠應對更多樣化的應用場景。

### 主要資料結構

Redis 之所以被稱為「資料結構伺服器」，是因為它對以下幾種核心資料結構提供了原生支援：

1. **String (字串)**
    - **描述**: 最基礎的資料類型，一個 key 對應一個 value。value 不僅可以是字串，也可以是數字。
    - **應用場景**: 快取 HTML 片段、JSON 物件、計數器 (如文章點閱數)、共享 Session 等。
    - **核心指令**: `SET`, `GET`, `INCR`, `DECR`, `MGET`。

2. **List (列表)**
    - **描述**: 一個雙向鏈結串列，可以在頭部或尾部快速插入或刪除元素。它保持元素的插入順序。
    - **應用場景**: 訊息佇列 (利用 `LPUSH` 和 `RPOP`)、最新訊息列表 (如使用者動態)、分頁列表。
    - **核心指令**: `LPUSH`, `RPOP`, `RPUSH`, `LPOP`, `LRANGE`, `LLEN`。

3. **Hash (雜湊)**
    - **描述**: 一個 key 對應一個包含多個 field-value 對的 map。適合儲存結構化的物件。
    - **應用場景**: 儲存使用者個人資料 (如 `user:123` 對應 `name`, `email`, `age` 等欄位)、商品屬性等。相較於將整個物件序列化為 JSON 字串，Hash 允許單獨更新或讀取物件的某個欄位，更節省網路流量。
    - **核心指令**: `HSET`, `HGET`, `HGETALL`, `HDEL`, `HINCRBY`。

4. **Set (集合)**
    - **描述**: 一個無序、不重複的字串集合。
    - **應用場景**: 標籤系統 (如一篇文章的多個標籤)、共同好友計算 (利用交集 `SINTER`)、抽獎系統 (利用 `SRANDMEMBER`)、獨立 IP 統計。
    - **核心指令**: `SADD`, `SREM`, `SMEMBERS`, `SISMEMBER`, `SINTER`, `SUNION`。

5. **Sorted Set (ZSET, 有序集合)**
    - **描述**: 與 Set 類似，但每個成員都會關聯一個分數 (score)。集合會根據分數進行排序，成員本身不重複。
    - **應用場景**: 排行榜 (如遊戲積分榜、熱門文章榜)、帶權重的佇列、範圍查詢 (如查詢積分在某個區間的使用者)。
    - **核心指令**: `ZADD`, `ZREM`, `ZRANGE`, `ZREVRANGE`, `ZRANGEBYSCORE`, `ZSCORE`。

除了以上五種基礎類型，新版本的 Redis 還引入了 **Bitmap**、**HyperLogLog**、**Geospatial** 和 **Stream** 等更專業的資料結構，進一步拓展了其應用邊界。
